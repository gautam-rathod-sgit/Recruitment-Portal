@model IEnumerable<RecruitmentPortal.Core.Entities.ApplicationUser>

@using RecruitmentPortal.WebApp.Resources

<section class="content">
    <div class="row">
        <div class="col-sm-12">

            <div class="box">
                <div class="box-header">
                    <h3 class="box-title"><i class="fa fa-users"></i><b> Users :</b></h3>
                    <a href='@Url.Action("Register", "Account")' class="btn btn-primary pull-right"S>
                        Add Interviewer
                    </a>
                </div>
                <!-- /.box-header -->

            <!-- /.box -->
                <div class="box-body">
                    <table id="datatable" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>User Name</th>
                                <th>Email</th>
                                <th>Position</th>
                                <th>Skype_ID</th>
                                <th><b>Actions</b></th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
    </div>
</section>

<script>
    $(document).ready(function () {

        bindDatatable();
    });

    function bindDatatable() {
        $('#datatable').DataTable({
            lengthChange: true,
            searching: true,
            ordering: false,
            lengthMenu: [[5, 10, 25, 50, -1], [5,10, 25, 50, "All"]],
            paging: true,
            pagingType: "simple_numbers",
            pageLength: 10,
            fixedColumns: true,
            responsive: true,
            "bDestroy": true,
            "ajax":{
                "url": "@Url.Action("GetAllUsers", "Account")",
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                { "data": "userName", "name": "userName"},
                { "data": "email", "name": "email" },
                { "data": "position", "name": "position" },
                { "data": "skype_id", "name": "skype_id" },
                {
                    "sClass": "text-center",
                    "mRender": function (data, type, row) {
                        var edit = '<a href="javascript:void(0);" title="Edit" onclick="Edit(\'' + row.id + '\')" class="btn btn-primary"><i class="fa fa-edit"></i></a>';
                        edit += ' <a href="javascript:void(0);" title="Delete" onclick="Delete(\'' + row.id + '\')" class = "btn btn-primary btn-sm"><i class="fa fa-trash"></i></a>';
                        return edit;
                    }
                }
            ],
            "order": [[0, "asc"]]
        });
    }

    function Edit(id) {
        window.location.href = '@Url.Action("Register", "Account")?id=' + id;
    }
    function Delete(id) {
        bootbox.confirm("Are you sure, you want to delete this record?", function (result) {
            if (result === true) {
                window.location.href = '@Url.Action("DeleteUser", "Account")?id=' + id;
            }
        }, 'popup-confirmation');
    }
</script>
